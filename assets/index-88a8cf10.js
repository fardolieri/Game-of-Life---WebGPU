(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();function p(){}function Te(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function Me(e){return e()}function ke(){return Object.create(null)}function V(e){e.forEach(Me)}function Ae(e){return typeof e=="function"}function K(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function qe(e){return Object.keys(e).length===0}function Fe(e,...t){if(e==null)return p;const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function le(e,t,i){e.$$.on_destroy.push(Fe(t,i))}const Re=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;"WeakMap"in Re;function P(e,t){e.appendChild(t)}function q(e,t,i){e.insertBefore(t,i||null)}function L(e){e.parentNode&&e.parentNode.removeChild(e)}function G(e){return document.createElement(e)}function ye(e){return document.createTextNode(e)}function A(){return ye(" ")}function he(e,t,i,n){return e.addEventListener(t,i,n),()=>e.removeEventListener(t,i,n)}function y(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function Ne(e){return e===""?null:+e}function We(e){return Array.from(e.childNodes)}function Ce(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ge(e,t){e.value=t??""}let ce;function T(e){ce=e}function Oe(){if(!ce)throw new Error("Function called outside component initialization");return ce}function ze(e){Oe().$$.on_mount.push(e)}function Ve(e){Oe().$$.on_destroy.push(e)}const X=[],U=[];let J=[];const we=[],De=Promise.resolve();let Se=!1;function je(){Se||(Se=!0,De.then(Ue))}function Pe(e){J.push(e)}function E(e){we.push(e)}const ve=new Set;let Y=0;function Ue(){if(Y!==0)return;const e=ce;do{try{for(;Y<X.length;){const t=X[Y];Y++,T(t),xe(t.$$)}}catch(t){throw X.length=0,Y=0,t}for(T(null),X.length=0,Y=0;U.length;)U.pop()();for(let t=0;t<J.length;t+=1){const i=J[t];ve.has(i)||(ve.add(i),i())}J.length=0}while(X.length);for(;we.length;)we.pop()();Se=!1,ve.clear(),T(e)}function xe(e){if(e.fragment!==null){e.update(),V(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Pe)}}function Ye(e){const t=[],i=[];J.forEach(n=>e.indexOf(n)===-1?t.push(n):i.push(n)),i.forEach(n=>n()),J=t}const ge=new Set;let z;function Ee(){z={r:0,c:[],p:z}}function Ie(){z.r||V(z.c),z=z.p}function C(e,t){e&&e.i&&(ge.delete(e),e.i(t))}function B(e,t,i,n){if(e&&e.o){if(ge.has(e))return;ge.add(e),z.c.push(()=>{ge.delete(e),n&&(i&&e.d(1),n())}),e.o(t)}else n&&n()}function He(e,t){const i=t.token={};function n(r,l,c,d){if(t.token!==i)return;t.resolved=d;let a=t.ctx;c!==void 0&&(a=a.slice(),a[c]=d);const s=r&&(t.current=r)(a);let b=!1;t.block&&(t.blocks?t.blocks.forEach((u,_)=>{_!==l&&u&&(Ee(),B(u,1,1,()=>{t.blocks[_]===u&&(t.blocks[_]=null)}),Ie())}):t.block.d(1),s.c(),C(s,1),s.m(t.mount(),t.anchor),b=!0),t.block=s,t.blocks&&(t.blocks[l]=s),b&&Ue()}if(Te(e)){const r=Oe();if(e.then(l=>{T(r),n(t.then,1,t.value,l),T(null)},l=>{if(T(r),n(t.catch,2,t.error,l),T(null),!t.hasCatch)throw l}),t.current!==t.pending)return n(t.pending,0),!0}else{if(t.current!==t.then)return n(t.then,1,t.value,e),!0;t.resolved=e}}function Xe(e,t,i){const n=t.slice(),{resolved:r}=e;e.current===e.then&&(n[e.value]=r),e.current===e.catch&&(n[e.error]=r),e.block.p(n,i)}const Je=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...Je];function I(e,t,i){const n=e.$$.props[t];n!==void 0&&(e.$$.bound[n]=i,i(e.$$.ctx[n]))}function W(e){e&&e.c()}function R(e,t,i,n){const{fragment:r,after_update:l}=e.$$;r&&r.m(t,i),n||Pe(()=>{const c=e.$$.on_mount.map(Me).filter(Ae);e.$$.on_destroy?e.$$.on_destroy.push(...c):V(c),e.$$.on_mount=[]}),l.forEach(Pe)}function N(e,t){const i=e.$$;i.fragment!==null&&(Ye(i.after_update),V(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function Ke(e,t){e.$$.dirty[0]===-1&&(X.push(e),je(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function me(e,t,i,n,r,l,c,d=[-1]){const a=ce;T(e);const s=e.$$={fragment:null,ctx:[],props:l,update:p,not_equal:r,bound:ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:ke(),dirty:d,skip_bound:!1,root:t.target||a.$$.root};c&&c(s.root);let b=!1;if(s.ctx=i?i(e,t.props||{},(u,_,...S)=>{const g=S.length?S[0]:_;return s.ctx&&r(s.ctx[u],s.ctx[u]=g)&&(!s.skip_bound&&s.bound[u]&&s.bound[u](g),b&&Ke(e,u)),_}):[],s.update(),b=!0,V(s.before_update),s.fragment=n?n(s.ctx):!1,t.target){if(t.hydrate){const u=We(t.target);s.fragment&&s.fragment.l(u),u.forEach(L)}else s.fragment&&s.fragment.c();t.intro&&C(e.$$.fragment),R(e,t.target,t.anchor,t.customElement),Ue()}T(a)}class _e{$destroy(){N(this,1),this.$destroy=p}$on(t,i){if(!Ae(i))return p;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(i),()=>{const r=n.indexOf(i);r!==-1&&n.splice(r,1)}}$set(t){this.$$set&&!qe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const H=[];function Le(e,t=p){let i;const n=new Set;function r(d){if(K(e,d)&&(e=d,i)){const a=!H.length;for(const s of n)s[1](),H.push(s,e);if(a){for(let s=0;s<H.length;s+=2)H[s][0](H[s+1]);H.length=0}}}function l(d){r(d(e))}function c(d,a=p){const s=[d,a];return n.add(s),n.size===1&&(i=t(r)||p),d(e),()=>{n.delete(s),n.size===0&&i&&(i(),i=null)}}return{set:r,update:l,subscribe:c}}function Ze(e){let t;return{c(){t=G("canvas"),y(t,"width",e[1]),y(t,"height",e[2]),y(t,"class","svelte-1n559te")},m(i,n){q(i,t,n),e[7](t)},p(i,[n]){n&2&&y(t,"width",i[1]),n&4&&y(t,"height",i[2])},i:p,o:p,d(i){i&&L(t),e[7](null)}}}function Qe(e,t,i){let{device:n}=t,{width:r}=t,{height:l}=t,{scale:c}=t,{framesPerSecond:d}=t,{chance:a}=t,{canvas:s=null}=t,b;const u=Le(void 0);ze(async()=>{_(s)});function _(g){const v=[Math.floor(r/c),Math.floor(l/c)],m=8,w=g.getContext("webgpu"),f=navigator.gpu.getPreferredCanvasFormat();w.configure({device:n,format:f});const o=new Float32Array([-.8,-.8,.8,-.8,.8,.8,-.8,-.8,.8,.8,-.8,.8]),O=n.createBuffer({label:"Cell vertices",size:o.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});n.queue.writeBuffer(O,0,o);const Z={arrayStride:8,attributes:[{format:"float32x2",offset:0,shaderLocation:0}]},Q=n.createShaderModule({label:"Cell shader",code:`
    struct VertexOutput {
      @builtin(position) pos: vec4f,
      @location(0) cell: vec2f,
    };

    @group(0) @binding(0) var<uniform> grid: vec2f;
    @group(0) @binding(1) var<storage> cellState: array<u32>;

    @vertex
    fn vertexMain(@location(0) pos: vec2f, @builtin(instance_index) instance: u32) -> VertexOutput {
      let i = f32(instance);
      let cell = vec2f(i % grid.x, floor(i / grid.x));
      let state = f32(cellState[instance]);

      let cellOffset = (cell / grid) * 2;
      let gridPos = (pos * state + 1) / grid - 1 + cellOffset;

      var output: VertexOutput;
      output.pos = vec4f(gridPos, 0, 1);
      output.cell = cell;

      return output;
    }

    @fragment
    fn fragmentMain(input: VertexOutput) -> @location(0) vec4f {
      return vec4f(input.cell / grid, 1 - input.cell.x / grid.x, 1);
    }
    `}),be=n.createShaderModule({label:"Game of Life simulation shader",code:`
    @group(0) @binding(0) var<uniform> grid: vec2f;

    @group(0) @binding(1) var<storage> cellStateIn: array<u32>;
    @group(0) @binding(2) var<storage, read_write> cellStateOut: array<u32>;

    @group(0) @binding(3) var<uniform> randomFlip: u32;

    fn cellIndex(cell: vec2u) -> u32 {
      let y = cell.y % u32(grid.y);
      let x = cell.x % u32(grid.x);
      return y * u32(grid.x) + x;
    }

    fn cellActive(x: u32, y: u32) -> u32 {
      return cellStateIn[cellIndex(vec2u(x, y))];
    }

    @compute
    @workgroup_size(${m}, ${m})
    fn computeMain(@builtin(global_invocation_id) cell: vec3u) {
      let i = cellIndex(cell.xy);

      let activeNeighbors = 0 +
        cellActive(cell.x-1, cell.y-1) +
        cellActive(cell.x,   cell.y-1) +
        cellActive(cell.x+1, cell.y-1) +
        cellActive(cell.x-1, cell.y)   +
        cellActive(cell.x+1, cell.y)   +
        cellActive(cell.x-1, cell.y+1) +
        cellActive(cell.x,   cell.y+1) +
        cellActive(cell.x+1, cell.y+1);

      switch activeNeighbors {
        case 2: { // Active cells with 2 neighbors stay active.
          cellStateOut[i] = cellStateIn[i];
        }
        case 3: { // Cells with 3 neighbors become or stay active.
          cellStateOut[i] = 1;
        }
        default: { // Cells with < 2 or > 3 neighbors become inactive.
          cellStateOut[i] = 0;
        }
      }

      if ((randomFlip - 1) == i) { cellStateOut[i] = 1 - cellStateOut[i]; }
    }`}),D=n.createBindGroupLayout({label:"Cell Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT|GPUShaderStage.COMPUTE,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.VERTEX|GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),ae=n.createPipelineLayout({label:"Cell Pipeline Layout",bindGroupLayouts:[D]}),oe=n.createRenderPipeline({label:"Cell pipeline",layout:ae,vertex:{module:Q,entryPoint:"vertexMain",buffers:[Z]},fragment:{module:Q,entryPoint:"fragmentMain",targets:[{format:f}]}}),pe=n.createComputePipeline({label:"Simulation pipeline",layout:ae,compute:{module:be,entryPoint:"computeMain"}}),$=new Float32Array(v),ee=n.createBuffer({label:"Grid Uniforms",size:$.byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});n.queue.writeBuffer(ee,0,$);const te=new Uint32Array([0]),j=n.createBuffer({label:"Random Flip Buffer",size:te.byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});n.queue.writeBuffer(j,0,te);const F=new Uint32Array(v[0]*v[1]),h=[n.createBuffer({label:"Cell State A",size:F.byteLength,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),n.createBuffer({label:"Cell State B",size:F.byteLength,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST})];for(let k=0;k<F.length;k++)F[k]=Math.random()>.6?1:0;n.queue.writeBuffer(h[0],0,F);const M=[n.createBindGroup({label:"Cell renderer bind group A",layout:D,entries:[{binding:0,resource:{buffer:ee}},{binding:1,resource:{buffer:h[0]}},{binding:2,resource:{buffer:h[1]}},{binding:3,resource:{buffer:j}}]}),n.createBindGroup({label:"Cell renderer bind group B",layout:D,entries:[{binding:0,resource:{buffer:ee}},{binding:1,resource:{buffer:h[1]}},{binding:2,resource:{buffer:h[0]}},{binding:3,resource:{buffer:j}}]})];let x=0;function ne(){const k=n.createCommandEncoder(),ie=Math.random(),fe=ie<a?Math.floor(ie/a*(v[0]*v[1]))+1:0;n.queue.writeBuffer(j,0,new Int32Array([fe]));const de=k.beginComputePass();de.setPipeline(pe),de.setBindGroup(0,M[x%2]),de.dispatchWorkgroups(Math.ceil(v[0]/m),Math.ceil(v[1]/m)),de.end(),x++;const re=k.beginRenderPass({colorAttachments:[{view:w.getCurrentTexture().createView(),loadOp:"clear",clearValue:{r:.1,g:.1,b:.1,a:1},storeOp:"store"}]});re.setPipeline(oe),re.setBindGroup(0,M[x%2]),re.setVertexBuffer(0,O),re.draw(o.length/2,v[0]*v[1]),re.end(),n.queue.submit([k.finish()])}u.subscribe(k=>{clearInterval(b),ne(),b=setInterval(ne,k)})}Ve(()=>{clearInterval(b)});function S(g){U[g?"unshift":"push"](()=>{s=g,i(0,s)})}return e.$$set=g=>{"device"in g&&i(3,n=g.device),"width"in g&&i(1,r=g.width),"height"in g&&i(2,l=g.height),"scale"in g&&i(4,c=g.scale),"framesPerSecond"in g&&i(5,d=g.framesPerSecond),"chance"in g&&i(6,a=g.chance),"canvas"in g&&i(0,s=g.canvas)},e.$$.update=()=>{e.$$.dirty&32&&u.set(Math.min(Math.pow(2,31)-1,1/+d*1e3))},[s,r,l,n,c,d,a,S]}class $e extends _e{constructor(t){super(),me(this,t,Qe,Ze,K,{device:3,width:1,height:2,scale:4,framesPerSecond:5,chance:6,canvas:0})}}function et(e){let t,i,n,r,l,c,d,a,s,b;return{c(){t=G("div"),i=G("div"),n=ye(e[1]),r=A(),l=G("input"),c=A(),d=G("span"),a=ye(e[0]),y(l,"type","range"),y(l,"min",e[2]),y(l,"max",e[3]),y(l,"step",e[4]),y(t,"class","settings-item svelte-7a67gc")},m(u,_){q(u,t,_),P(t,i),P(i,n),P(t,r),P(t,l),Ge(l,e[0]),P(t,c),P(t,d),P(d,a),s||(b=[he(l,"change",e[5]),he(l,"input",e[5])],s=!0)},p(u,[_]){_&2&&Ce(n,u[1]),_&4&&y(l,"min",u[2]),_&8&&y(l,"max",u[3]),_&16&&y(l,"step",u[4]),_&1&&Ge(l,u[0]),_&1&&Ce(a,u[0])},i:p,o:p,d(u){u&&L(t),s=!1,V(b)}}}function tt(e,t,i){let{value:n}=t,{name:r}=t,{min:l=1}=t,{max:c=1}=t,{step:d=.1}=t;function a(){n=Ne(this.value),i(0,n)}return e.$$set=s=>{"value"in s&&i(0,n=s.value),"name"in s&&i(1,r=s.name),"min"in s&&i(2,l=s.min),"max"in s&&i(3,c=s.max),"step"in s&&i(4,d=s.step)},[n,r,l,c,d,a]}class se extends _e{constructor(t){super(),me(this,t,tt,et,K,{value:0,name:1,min:2,max:3,step:4})}}function nt(e){let t,i,n,r,l,c,d,a,s,b,u,_,S,g,v,m,w,f,o,O,Z,Q;function be(h){e[6](h)}let D={name:"Chance of random bit-flip per frame in percent",min:0,max:100,step:1};e[4]!==void 0&&(D.value=e[4]),i=new se({props:D}),U.push(()=>I(i,"value",be));function ae(h){e[7](h)}let oe={name:"Frames per second",min:0,max:60,step:1};e[3]!==void 0&&(oe.value=e[3]),l=new se({props:oe}),U.push(()=>I(l,"value",ae));function pe(h){e[8](h)}let $={name:"Scale",min:1,max:100,step:1};e[2]!==void 0&&($.value=e[2]),a=new se({props:$}),U.push(()=>I(a,"value",pe));function ee(h){e[9](h)}let te={name:"Width",min:10,max:3e3,step:1};e[0]!==void 0&&(te.value=e[0]),u=new se({props:te}),U.push(()=>I(u,"value",ee));function j(h){e[10](h)}let F={name:"Height",min:10,max:3e3,step:1};return e[1]!==void 0&&(F.value=e[1]),g=new se({props:F}),U.push(()=>I(g,"value",j)),{c(){t=G("div"),W(i.$$.fragment),r=A(),W(l.$$.fragment),d=A(),W(a.$$.fragment),b=A(),W(u.$$.fragment),S=A(),W(g.$$.fragment),m=A(),w=G("button"),w.textContent="Fullscreen",f=A(),o=G("button"),o.textContent="Reset",y(w,"class","svelte-q2atie"),y(o,"class","svelte-q2atie"),y(t,"class","settings svelte-q2atie")},m(h,M){q(h,t,M),R(i,t,null),P(t,r),R(l,t,null),P(t,d),R(a,t,null),P(t,b),R(u,t,null),P(t,S),R(g,t,null),P(t,m),P(t,w),P(t,f),P(t,o),O=!0,Z||(Q=[he(w,"click",e[11]),he(o,"click",e[12])],Z=!0)},p(h,[M]){const x={};!n&&M&16&&(n=!0,x.value=h[4],E(()=>n=!1)),i.$set(x);const ne={};!c&&M&8&&(c=!0,ne.value=h[3],E(()=>c=!1)),l.$set(ne);const k={};!s&&M&4&&(s=!0,k.value=h[2],E(()=>s=!1)),a.$set(k);const ie={};!_&&M&1&&(_=!0,ie.value=h[0],E(()=>_=!1)),u.$set(ie);const fe={};!v&&M&2&&(v=!0,fe.value=h[1],E(()=>v=!1)),g.$set(fe)},i(h){O||(C(i.$$.fragment,h),C(l.$$.fragment,h),C(a.$$.fragment,h),C(u.$$.fragment,h),C(g.$$.fragment,h),O=!0)},o(h){B(i.$$.fragment,h),B(l.$$.fragment,h),B(a.$$.fragment,h),B(u.$$.fragment,h),B(g.$$.fragment,h),O=!1},d(h){h&&L(t),N(i),N(l),N(a),N(u),N(g),Z=!1,V(Q)}}}function it(e,t,i){let{width:n}=t,{height:r}=t,{scale:l}=t,{chance:c}=t,{framesPerSecond:d}=t,a=c*100;function s(m){a=m,i(4,a)}function b(m){d=m,i(3,d)}function u(m){l=m,i(2,l)}function _(m){n=m,i(0,n)}function S(m){r=m,i(1,r)}const g=()=>{i(0,n=window.innerWidth),i(1,r=window.innerHeight)},v=()=>{localStorage.clear(),location.reload()};return e.$$set=m=>{"width"in m&&i(0,n=m.width),"height"in m&&i(1,r=m.height),"scale"in m&&i(2,l=m.scale),"chance"in m&&i(5,c=m.chance),"framesPerSecond"in m&&i(3,d=m.framesPerSecond)},e.$$.update=()=>{e.$$.dirty&16&&i(5,c=a/100)},[n,r,l,d,a,c,s,b,u,_,S,g,v]}class rt extends _e{constructor(t){super(),me(this,t,it,nt,K,{width:0,height:1,scale:2,chance:5,framesPerSecond:3})}}function ue(e,t){const i=localStorage.getItem(e),n=Le(i?JSON.parse(i):t);return n.subscribe(r=>{localStorage.setItem(e,JSON.stringify(r))}),n}function lt(e){let t,i,n;return{c(){t=G("div"),t.textContent="It looks like your browser does not support WebGPU yet 😕",i=A(),n=G("a"),n.textContent="Check WebGPU's browser compatibility here",y(n,"href","https://developer.mozilla.org/en-US/docs/Web/API/WebGPU_API#browser_compatibility")},m(r,l){q(r,t,l),q(r,i,l),q(r,n,l)},p,i:p,o:p,d(r){r&&L(t),r&&L(i),r&&L(n)}}}function st(e){let t,i=e[0]+e[1]+e[2],n,r,l,c,d,a,s,b,u=Be(e);function _(f){e[11](f)}function S(f){e[12](f)}function g(f){e[13](f)}function v(f){e[14](f)}function m(f){e[15](f)}let w={};return e[3]!==void 0&&(w.chance=e[3]),e[4]!==void 0&&(w.framesPerSecond=e[4]),e[0]!==void 0&&(w.width=e[0]),e[1]!==void 0&&(w.height=e[1]),e[2]!==void 0&&(w.scale=e[2]),r=new rt({props:w}),U.push(()=>I(r,"chance",_)),U.push(()=>I(r,"framesPerSecond",S)),U.push(()=>I(r,"width",g)),U.push(()=>I(r,"height",v)),U.push(()=>I(r,"scale",m)),{c(){t=G("div"),u.c(),n=A(),W(r.$$.fragment),y(t,"class","canvas-container svelte-1tonw69")},m(f,o){q(f,t,o),u.m(t,null),q(f,n,o),R(r,f,o),b=!0},p(f,o){o&7&&K(i,i=f[0]+f[1]+f[2])?(Ee(),B(u,1,1,p),Ie(),u=Be(f),u.c(),C(u,1),u.m(t,null)):u.p(f,o);const O={};!l&&o&8&&(l=!0,O.chance=f[3],E(()=>l=!1)),!c&&o&16&&(c=!0,O.framesPerSecond=f[4],E(()=>c=!1)),!d&&o&1&&(d=!0,O.width=f[0],E(()=>d=!1)),!a&&o&2&&(a=!0,O.height=f[1],E(()=>a=!1)),!s&&o&4&&(s=!0,O.scale=f[2],E(()=>s=!1)),r.$set(O)},i(f){b||(C(u),C(r.$$.fragment,f),b=!0)},o(f){B(u),B(r.$$.fragment,f),b=!1},d(f){f&&L(t),u.d(f),f&&L(n),N(r,f)}}}function Be(e){let t,i;return t=new $e({props:{device:e[16],width:e[0],height:e[1],scale:e[2],chance:e[3],framesPerSecond:e[4]}}),{c(){W(t.$$.fragment)},m(n,r){R(t,n,r),i=!0},p(n,r){const l={};r&1&&(l.width=n[0]),r&2&&(l.height=n[1]),r&4&&(l.scale=n[2]),r&8&&(l.chance=n[3]),r&16&&(l.framesPerSecond=n[4]),t.$set(l)},i(n){i||(C(t.$$.fragment,n),i=!0)},o(n){B(t.$$.fragment,n),i=!1},d(n){N(t,n)}}}function ut(e){return{c:p,m:p,p,i:p,o:p,d:p}}function ct(e){let t,i,n={ctx:e,current:null,token:null,hasCatch:!0,pending:ut,then:st,catch:lt,value:16,blocks:[,,,]};return He(e[5],n),{c(){t=G("div"),n.block.c(),y(t,"class","body-wrapper svelte-1tonw69")},m(r,l){q(r,t,l),n.block.m(t,n.anchor=null),n.mount=()=>t,n.anchor=null,i=!0},p(r,[l]){e=r,Xe(n,e,l)},i(r){i||(C(n.block),i=!0)},o(r){for(let l=0;l<3;l+=1){const c=n.blocks[l];B(c)}i=!1},d(r){r&&L(t),n.block.d(),n.token=null,n=null}}}function at(e,t,i){let n,r,l,c,d;const a=Promise.resolve().then(()=>navigator.gpu.requestAdapter()).then(o=>o.requestDevice());let s=ue("width",Math.floor(window.innerWidth*.9));le(e,s,o=>i(0,n=o));let b=ue("height",Math.floor(window.innerHeight*.9));le(e,b,o=>i(1,r=o));let u=ue("scale",10);le(e,u,o=>i(2,l=o));let _=ue("chance",.01);le(e,_,o=>i(3,c=o));let S=ue("framesPerSecond",60);le(e,S,o=>i(4,d=o));function g(o){c=o,_.set(c)}function v(o){d=o,S.set(d)}function m(o){n=o,s.set(n)}function w(o){r=o,b.set(r)}function f(o){l=o,u.set(l)}return[n,r,l,c,d,a,s,b,u,_,S,g,v,m,w,f]}class ot extends _e{constructor(t){super(),me(this,t,at,ct,K,{})}}new ot({target:document.getElementById("app")});
